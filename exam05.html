<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exam5</title>
</head>

<body>
    <h3>달력</h3>
    <div id="show"></div>

    <script>
        var days = ['일', '월', '화', '수', '목', '금', '토'];
        const today = new Date();
        console.log(today);
        
        function getHead() {
            // table의 thead정보를 생성해주는 함수.
            var thead = document.createElement('thead');

            let tr = document.createElement('tr');

            // 요일 출력
            days.forEach((day) => {
                let th = document.createElement('th');
                th.innerText = day;
                tr.appendChild(th);
            });

            thead.appendChild(tr);

            return thead;
        }

        function getBody() {
            // table의 tbody정보를 생성해주는 함수.
            var tbody = document.createElement('tbody');
            const dayOfFirst = getFirstDay();

            let tr = document.createElement('tr');

            // 줄바꿈을 위한 변수
            let count = 0;

            // 1일 전 날짜의 빈칸 
            for (let i = 0; i < dayOfFirst; i++) {
                let td = document.createElement('td');
                tr.appendChild(td);
                count++;
            }

            // 1일 부터 출력
            for (let i = 1; i <= new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate(); i++) {
                // 토요일까지 출력된 후 줄바꿈
                if(count === 7) {
                    tbody.appendChild(tr);
                    tr = document.createElement('tr');
                    count = 0;
                }
                
                let td = document.createElement('td');
                td.innerText = i;
                tr.appendChild(td);
                count++;
            }

            // 마지막 날 이후의 빈칸
            while (count < 7) {
                let td = document.createElement('td');
                tr.appendChild(td);
                count++;
            }

            tbody.appendChild(tr);

            return tbody;
        }

        // 이번 달 1일의 요일
        function getFirstDay() {
            switch ((today.getDate() - 1) % 7) {
                case 0:
                    return today.getDay() % 7;
                case 1:
                    return (today.getDay() + 1) % 7;
                case 2:
                    return (today.getDay() + 2) % 7;
                case 3:
                    return (today.getDay() + 3) % 7;
                case 4:
                    return (today.getDay() + 4) % 7;
                case 5:
                    return (today.getDay() + 5) % 7;
                case 6:
                    return (today.getDay() + 6) % 7;
                default:
                    return '오류';
            }
        }


        var table = document.createElement('table');
        table.setAttribute('border', '1');

        table.appendChild(getHead());
        table.appendChild(getBody());

        document.getElementById('show').innerText = `${today.getMonth() + 1}월`;
        document.getElementById('show').appendChild(table);

    </script>
</body>

</html>